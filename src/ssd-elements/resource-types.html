<!-- <link rel="import" href="../polymer/polymer-element.html"> -->
<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="resource-types">
  <template>
    <style include="shared-styles"></style>
    <style>
       :host {
        display: block;
        padding:10px
      }

      .resource-type {
        width: 12em;
        border: 3px solid white;
        margin-left: -3px;
        margin-bottom: -3px;
      }

      .resource-type>img {
        width: 12em;
      }

      .resource-label-container {
        top: -2em;
        position: relative;
        line-height: 1em;
        background-color: white;
        width: 100%;
        height: 2em;
        opacity: 0.8;
        margin-bottom: -2em;
        display: table;
      }

      .resource-label {
        text-align: center;
        vertical-align: middle;
        display: table-cell;
        font-size: 0.9em;
      }
    </style>
    <div class="flex wrap">
      <template id="typeList" is="dom-repeat" items="[[types]]" as="type">
        <a href="{{_getLink(type)}}" style="text-decoration: none; color:inherit">
          <div class="resource-type">
            <img src="{{_getImageSrc(type)}}">
            <div class="resource-label-container">
              <div class="resource-label">[[type.label]]</div>
            </div>
          </div>
        </a>
      </template>
      <div id="allTypes">
        <a href="/list/" style="text-decoration: none; color:inherit">
          <div class="resource-type">
            <img src="/images/resourceTypes/all.jpg">
            <div class="resource-label-container">
              <div class="resource-label">All Resources</div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </template>

  <script>
    /**
     * `resource-types`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class ResourceTypes extends Polymer.Element {
      static get is() { return 'resource-types'; }
      static get properties() {
        return {
          types: {
            type: Array,
            computed: '_getResourceTypes()'
          }
        };
      }
      _getImageSrc(tag) {
        let src = "/images/resourceTypes/" + tag.slug + ".jpg"
        return src
      }
      _getLink(tag) {
        let link = "/list/" + tag.slug
        return link
      }
      _getResourceTypes() {
        console.log('getting resource types')
        let t = [
          {
            "$key": "-KijSiLb_oGKl4dOKkUH",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Facademic_paper.jpg?alt=media&token=718b8dcd-ce4d-4f65-a66e-c6800f926d96",
            "label": "Academic / Research Paper",
            "modified": 1493297456599,
            "slug": "academic--research-paper",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSkrdzRFfid9Z-UEU",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Faudio.jpg?alt=media&token=564cb1b0-db9a-4867-a2f3-1be7d1e47503",
            "label": "Audio File",
            "modified": 1493297466905,
            "slug": "audio-file",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSmFY6UQgHvoWBTSP",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fbook.jpg?alt=media&token=60a05982-d68d-43e7-8632-2414603254bc",
            "label": "Book",
            "modified": 1493297472596,
            "slug": "book",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSqPXSYxFOraiV9k3",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fcode.jpg?alt=media&token=c8d96cb0-5b46-4b40-83c6-fb886eccdfb9",
            "label": "Script file / Code",
            "modified": 1493297489619,
            "slug": "script-file--code",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSsSpmLDdSrpuHT1L",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fdesktop_software.jpg?alt=media&token=e08b593d-0a8a-4e16-b3c6-46c634c32663",
            "label": "Desktop Software",
            "modified": 1493297498022,
            "slug": "desktop-software",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSvHsIPBrtyQxI2GI",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Finteractive_presentation.jpg?alt=media&token=6babdfcb-9ba2-4e58-b367-6952b9dbdf95",
            "label": "Interactive Presentation",
            "modified": 1493297509609,
            "slug": "interactive-presentation",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSwlTh3vBWJKyu8ur",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fmobile_app.jpg?alt=media&token=b2b55fa1-1d1e-49cc-b1da-03031158e472",
            "label": "Mobile App",
            "modified": 1493297515662,
            "slug": "mobile-app",
            "type": "Resource-Type"
          }, {
            "$key": "-KijSyXK54z5mZB3dhlS",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fshort_text.jpg?alt=media&token=68f9304a-81ea-40ae-8916-689914086b35",
            "label": "Short Text",
            "modified": 1493297522886,
            "slug": "short-text",
            "type": "Resource-Type"
          }, {
            "$key": "-KijT-2h3LK5p1z85D1x",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fvideo.jpg?alt=media&token=fb6598ce-125e-4714-91c9-e946c34da8a9",
            "label": "Video",
            "modified": 1493297529118,
            "slug": "video",
            "type": "Resource-Type"
          }, {
            "$key": "-KijT0fOYm_dw83rNHV1",
            "image": "https://firebasestorage.googleapis.com/v0/b/ssd-resources-demo.appspot.com/o/images%2FrTypes%2Fwebsite.jpg?alt=media&token=ec6f0f84-3c39-4201-b7e4-f2ea4e43787b",
            "label": "Website",
            "modified": 1493297535754,
            "slug": "website",
            "type": "Resource-Type"
          }, {
            "$key": "-KijedgWoC8WkOxqnwRx",
            "label": "Presentation",
            "modified": 1493300845374,
            "slug": "presentation",
            "type": "Resource-Type"
          },
        ]
        return t
      }
    }

    window.customElements.define(ResourceTypes.is, ResourceTypes);
  </script>
</dom-module>