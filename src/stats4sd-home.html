<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">

<dom-module id="stats4sd-home">

  <template>

    <style include="shared-styles"></style>
    <style>
       :host {
        padding: 10px
      }

      h2 {
        font-size: 1.3em;
        font-weight: 500;
        margin: 32px 0;
      }
      /* can move all style out with template to new element in future */

      .resource-type {
        width: 12em;
        border: 3px solid white;
        margin-left: -3px;
        margin-bottom: -3px;
      }

      .resource-type>img {
        width: 12em;
      }

      .resource-label-container {
        top: -2em;
        position: relative;
        line-height: 1em;
        background-color: white;
        width: 100%;
        height: 2em;
        opacity: 0.8;
        margin-bottom: -2em;
        display: table;
      }

      .resource-label {
        text-align: center;
        vertical-align: middle;
        display: table-cell;
        font-size: 0.9em;
      }

      @media (max-width: 767px) {
        h2 {
          margin: 24px 0;
          padding: 8px 24px;
        }
      }

      @media (max-width: 320px) {
        .resource-type>img,
        .resource-type {
          width: 100vw;
        }
      }
    </style>

    <!-- <dom-repeat items="[[categories]]">
      <template strip-whitespace>
        <div class="item">
          <a class="image-link" href$="/list/[[item.name]]">
            <stats4sd-image src="[[item.image]]" alt="[[item.title]]" placeholder-img="[[item.placeholder]]"></stats4sd-image>
          </a>
          <h2>[[item.title]]</h2>
          <stats4sd-button>
            <a aria-label$="[[item.title]] stats4sd Now" href$="/list/[[item.name]]">stats4sd Now</a>
          </stats4sd-button>
        </div>
      </template>
    </dom-repeat> -->

    <p class="padding">Welcome to the Stats4SD resource bank. You can browse all resources using the top or sidebar menus, or explore some the
      links below
    </p>
    <div class="sub-section-heading">View Resources by Type</div>
    <div class="flex wrap">
      <template id="tagList" is="dom-repeat" items="[[persistedTags]]" as="tag" filter="{{_tagFilter('Resource-Type')}}">
        <a href="{{_getLink(tag)}}" style="text-decoration: none; color:inherit">
          <div class="resource-type">
            <img src="{{_getImageSrc(tag)}}">
            <div class="resource-label-container">
              <div class="resource-label">[[tag.label]]</div>
            </div>
          </div>
        </a>
      </template>
    </div>
    <div class="sub-section-heading" style="margin-top:2em">Browse Collections</div>
    <p class="padding" style="margin:1em 0 0 0;font-size:small">There are currently no collections</p>

  </template>

  <script>
    class stats4sdHome extends Polymer.Element {

      static get is() { return 'stats4sd-home'; }
      static get observers() {
        return [
          // '_complexChange(page.*)'
        ]
      }
      static get properties() {
        return {

          categories: {
            type: Array
          },

          visible: {
            type: Boolean,
            observer: '_visibleChanged'
          },
          persistedTags: {
            type: Array,
          },
          page: {
            type: String,
            notify: true
          }

        }
      }
      _complexChange(change) {
        console.log('complex change', change)
      }

      _visibleChanged(visible) {
        if (visible) {
          this.dispatchEvent(new CustomEvent('change-section', {
            bubbles: true, composed: true, detail: { title: 'Home' }
          }));
        }
      }

      _tagFilter(type) {
        return function (tag) {
          if (!type) return true;
          if (!tag) return false;
          return (tag.type == type);
        }
      }
      _getImageSrc(tag) {
        let src = "/images/resourceTypes/" + tag.slug + ".jpg"
        return src
      }
      _getLink(tag) {
        let link = "/list/" + tag.slug
        return link
      }

      // _ResourceTypeSelected(e) {
      //   console.log('resource type selected', e.model.tag)
      //   this.set("activeFilter", e.model.tag);
      //   // this.dispatchEvent(new CustomEvent('change-section', {
      //   //     bubbles: true, composed: true, detail: { title: 'List' }
      //   //   }));
      // }

    }

    customElements.define(stats4sdHome.is, stats4sdHome);
  </script>

</dom-module>